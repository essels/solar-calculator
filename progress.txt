# SolarQuote UK - Ralph Loop Progress Tracker
# ═══════════════════════════════════════════════════════════════════
# Format: [TIMESTAMP] [ITERATION] [FEATURE] [STATUS] [NOTES]
# ═══════════════════════════════════════════════════════════════════

## Project Initialisation
[2026-01-08T00:00:00Z] [INIT] [SCAFFOLD] [CREATED] Project scaffold created with Ralph Loop structure

## Subagent Response Cache
# Store successful subagent responses here to avoid repeated queries
# Format: ### SUBAGENT: [QUERY_TYPE] - [DATE]

### SUBAGENT: UK_ENERGY_PRICES - 2026-01-08
```json
{
  "electricityRatePence": 27.69,
  "segExportRatePence": 15.0,
  "standingChargePence": 54.7,
  "source": "Ofgem Price Cap Q1 2026",
  "lastVerified": "2026-01-08"
}
```

### SUBAGENT: PVGIS_API - 2026-01-08
```
Endpoint: https://re.jrc.ec.europa.eu/api/v5_3/PVcalc
Method: GET
Required params: lat, lon, peakpower, loss
Optional: angle, aspect, outputformat (json)
Rate limit: 30 requests/second
Response: JSON with monthly/annual values
```

### SUBAGENT: POSTCODES_IO - 2026-01-08
```
Endpoint: https://api.postcodes.io/postcodes/{postcode}
Method: GET
No authentication required
Returns: latitude, longitude, region, admin_district
Validation: UK postcode format regex
```

## Iteration Log
# ═══════════════════════════════════════════════════════════════════

# [TIMESTAMP] [ITER-N] [FEATURE-ID] [STATUS] [NOTES]
# STATUS: STARTED | IN_PROGRESS | COMPLETE | BLOCKED | SKIPPED

# ═══════════════════════════════════════════════════════════════════
# Session entries will be appended below
# ═══════════════════════════════════════════════════════════════════

[2026-01-08T11:45:00Z] [ITER-1] [SETUP-001] [COMPLETE] Next.js 14 project initialized
- Used create-next-app@latest with --typescript --tailwind --eslint --app --src-dir
- Preserved existing scaffold files (calculations.ts, constants.ts, solar.ts types)
- Configured UK-appropriate green/solar colour palette in globals.css
- Path aliases @/* configured in tsconfig.json
- npm run dev starts on localhost:3000, TypeScript compiles without errors
- Subagent used: Haiku for setup verification recommendations

[2026-01-08T11:55:00Z] [ITER-1] [SETUP-002] [COMPLETE] ESLint, Prettier, and Git hooks configured
- ESLint configured with eslint-config-next/core-web-vitals and typescript rules
- Prettier configured with single quotes, trailing commas, 100 char line width
- Husky pre-commit hook runs lint-staged
- lint-staged runs eslint --fix and prettier --write on staged .ts/.tsx files
- npm run lint, npm run format commands work correctly
- Subagent used: Haiku for ESLint/Prettier setup recommendations

[2026-01-08T11:57:00Z] [ITER-1] [SETUP-003] [COMPLETE] Project folder structure and reference data verified
- Directories created: src/lib/solar, src/lib/leads, src/lib/validation, src/components/{Calculator,Results,ui}, src/types
- Reference data files validated: orientation_factors.json, regional_irradiance.json, seg_tariffs.json, system_costs.json
- TypeScript types and constants scaffold already in place
- .env.example configured with all required API URLs and pricing variables

[2026-01-08T12:00:00Z] [ITER-1] [DATA-001] [COMPLETE] Postcode lookup integration with postcodes.io
- Created src/lib/solar/postcodes.ts with full API client implementation
- Official GOV.UK postcode regex (BS 7666) for format validation
- postcodes.io API integration (free, no auth required)
- localStorage caching with 7-day TTL and lazy expiry
- Exports: lookupPostcode(), validatePostcode(), normalizePostcode(), PostcodeValidator class
- Subagent used: Haiku for API research and implementation patterns

[2026-01-08T12:05:00Z] [ITER-1] [DATA-002] [COMPLETE] PVGIS API integration for solar irradiance
- Created src/lib/solar/pvgis.ts with full API client implementation
- PVGIS API endpoint: https://re.jrc.ec.europa.eu/api/PVcalc
- Supports custom tilt/azimuth parameters for different panel orientations
- 10-second request timeout with AbortController
- 24-hour localStorage caching with lazy expiry
- Automatic fallback to regional irradiance on API failure/timeout
- Exports: fetchPVGISIrradiance(), getIrradianceValue(), getMonthlyIrradiance()
- Subagent used: Haiku for PVGIS API research and implementation

